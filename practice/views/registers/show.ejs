<!-- views/posts/show.ejs -->
<!DOCTYPE html>
<html>
  <head>
    <% include ../partials/head %>
  </head>
  <body>
    <% include ../partials/nav %>
    <div class="왼쪽공간">
      this is left area
    </div>
    <div>
      <% include ./partials/header %>

      <div class="btn_all">
        <a href="/registers"><button id="btn">Back</button></a>
        <!-- 로그인이 된 상태이고, 게시물의 작성자 id(post.author.id)와 현재 로그인된 사용자의 id(currentUser.id)가 일치하는 경우에만 edit, delete을 보여줌 -->
        <% if(isAuthenticated && register.author && currentUser.id == register.author.id){ %>
          
          <form action="/registers/<%= register._id %>?_method=delete" method="post">
            <a href="#" onclick="confirm('Do you want to delete this?')?this.parentElement.submit():null;"><button id="btn">Delete</button></a>
          </form>
          <a href="/registers/<%= register._id %>/edit"><button id="btn">Edit</button></a>
        <% } %>
      </div>

      <div class="post_1">
        <div class="post_2">
          <div class="post_3">
            <div class="post_4">
              <div class="post_img">이미지 : <%= register.img %></div>
              <div class="post_title">title : <%= register.title %></div><br>
              <div class="post_subtitle">sub_title : <%= register.sub_title %></div>
              <div class="post_required_people">required_people : <%= register.required_people %></div>
              <div class="post_budget">budget : <%= register.budget %></div>
              <div class="post_startline">startline : <%= register.startline %></div>    
              <div class="post_author">작성자 : <%= register.author ? register.author.username : "" %></div>
              <div class="post_createdDate">작성일 : <%= register.createdDate %> <%= register.createdTime %></div>
              <div class="post_deadline">마감일 : <%= register.deadline %></div>
              <div class="post_body">내용 : <%= register.body %></div>
              
              <!-- 업데이트 시 적용 -->
              <% if(register.updatedAt) { %>
                <div class="post_updated">Updated : <%= register.updatedDate %> <%= register.updatedTime %></div>
              <% } %>

            </div> <!-- post-info end -->
          </div> <!-- col end-->
        </div> <!-- row end -->
      </div> <!-- post-container end -->
    </div> <!-- container end -->
  </body>
</html>
